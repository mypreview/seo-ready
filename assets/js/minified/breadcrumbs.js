"use strict";(function(wp,lodash){"use strict";if(!wp){return}var map=lodash.map,reverse=lodash.reverse;var _wp$element=wp.element,el=_wp$element.createElement,Fragment=_wp$element.Fragment,useMemo=_wp$element.useMemo;var registerBlockType=wp.blocks.registerBlockType;var _wp$blockEditor=wp.blockEditor,useBlockProps=_wp$blockEditor.useBlockProps,InspectorControls=_wp$blockEditor.InspectorControls;var useSelect=wp.data.useSelect;var _wp$components=wp.components,Disabled=_wp$components.Disabled,ExternalLink=_wp$components.ExternalLink,PanelBody=_wp$components.PanelBody,TextControl=_wp$components.TextControl,ToggleControl=_wp$components.ToggleControl;var decodeEntities=wp.htmlEntities.decodeEntities;var _wp$primitives=wp.primitives,SVG=_wp$primitives.SVG,Rect=_wp$primitives.Rect;var _wp$i18n=wp.i18n,__=_wp$i18n.__,sprintf=_wp$i18n.sprintf;registerBlockType("seo-ready/breadcrumbs",{apiVersion:2,title:__("Breadcrumbs","seo-ready"),description:__("This block displays trail of breadcrumb tracks to help visitors show exactly where they are on the website.","seo-ready"),keywords:["menu","navigation","path","trail"],icon:el(SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},el(Rect,{x:"4",y:"10.5",width:"6",height:"3",rx:"1.5",fill:"currentColor"}),el(Rect,{x:"12",y:"10.5",width:"3",height:"3",rx:"1.5",fill:"currentColor"}),el(Rect,{x:"17",y:"10.5",width:"3",height:"3",rx:"1.5",fill:"currentColor"})),attributes:{delimiter:{type:"string","default":"\u2192"},hideCurrentPageTrail:{type:"boolean","default":false},hideLeadingDelimiter:{type:"boolean","default":true},hideSiteTitle:{type:"boolean","default":false},siteTitleOverride:{type:"string","default":""}},category:"design",usesContext:["postId","postType"],supports:{align:["full","wide"],multiple:false,html:false,color:{background:true,text:true,link:true},layout:{allowSwitching:false,allowInheriting:false,allowEditing:false,"default":{type:"flex",flexWrap:"nowrap"}},spacing:{margin:["top","bottom"],padding:true},typography:{fontSize:true,lineHeight:true,__experimentalFontFamily:true,__experimentalFontStyle:true,__experimentalFontWeight:true,__experimentalTextTransform:true,__experimentalDefaultControls:{fontSize:true}}},edit:function edit(_ref){var _style$color;var attributes=_ref.attributes,_ref$context=_ref.context,postId=_ref$context.postId,postType=_ref$context.postType,setAttributes=_ref.setAttributes;var delimiter=attributes.delimiter,hideCurrentPageTrail=attributes.hideCurrentPageTrail,hideLeadingDelimiter=attributes.hideLeadingDelimiter,hideSiteTitle=attributes.hideSiteTitle,siteTitleOverride=attributes.siteTitleOverride,backgroundColor=attributes.backgroundColor,style=attributes.style;var blockProps=useBlockProps({className:"is-layout-flex",style:{boxSizing:"border-box",listStyleType:"none",paddingLeft:0,margin:0,padding:backgroundColor||style!==null&&style!==void 0&&(_style$color=style.color)!==null&&_style$color!==void 0&&_style$color.background?"1.25em 2.375em":0}});var _useSelect=useSelect(function(select){var _currentPost$categori;var _select=select("core"),getEntityRecord=_select.getEntityRecord,getEditedEntityRecord=_select.getEditedEntityRecord;var siteData=getEntityRecord("root","__unstableBase");var _currentPost=getEditedEntityRecord("postType",postType,postId);if(!_currentPost){return{siteTitle:decodeEntities(siteData===null||siteData===void 0?void 0:siteData.name),categories:[],currentPost:null,parents:[]}}var getParentEntities=function getParentEntities(initialId,entityType){var parentEntities=[];var currentParentId=initialId;while(currentParentId){var parent=getEntityRecord(entityType,entityType==="postType"?postType:"category",currentParentId);if(!parent)break;parentEntities.push(parent);currentParentId=parent.parent||null}return parentEntities};var parentCategories=getParentEntities(_currentPost===null||_currentPost===void 0?void 0:(_currentPost$categori=_currentPost.categories)===null||_currentPost$categori===void 0?void 0:_currentPost$categori[0],"taxonomy");var parentEntities=getParentEntities(_currentPost===null||_currentPost===void 0?void 0:_currentPost.parent,"postType");return{siteTitle:decodeEntities(siteData===null||siteData===void 0?void 0:siteData.name),categories:parentCategories,currentPost:_currentPost,parents:reverse(parentEntities)}},[postId,postType]),siteTitle=_useSelect.siteTitle,categories=_useSelect.categories,currentPost=_useSelect.currentPost,parents=_useSelect.parents;var trails=useMemo(function(){var _trails=[];if(parents!==null&&parents!==void 0&&parents.length){_trails=map(parents,function(parent){var _parent$title;return(parent===null||parent===void 0?void 0:(_parent$title=parent.title)===null||_parent$title===void 0?void 0:_parent$title.rendered)||" "})}else if(categories!==null&&categories!==void 0&&categories.length){_trails=map(categories,function(category){return(category===null||category===void 0?void 0:category.name)||" "})}else{_trails=[__("Top-level page","seo-ready"),__("Child page","seo-ready")]}if(!hideSiteTitle&&siteTitle){_trails.unshift(siteTitleOverride||siteTitle)}if(!hideCurrentPageTrail){_trails.push((currentPost===null||currentPost===void 0?void 0:currentPost.title)||__("Current page","seo-ready"))}return _trails},[categories,parents,hideCurrentPageTrail,hideSiteTitle,siteTitle,siteTitleOverride]);return el(Fragment,{},el("ol",blockProps,map(trails,function(crumbTitle,index){return el("li",{key:index,className:"wp-block-seo-ready-breadcrumbs__crumb"},delimiter&&index===0&&!hideSiteTitle&&!hideLeadingDelimiter&&el("span",{className:"wp-block-seo-ready-breadcrumbs__delimiter",style:{marginRight:"var(--wp--style--block-gap, 0.5em)"}},delimiter),el(Disabled,{},el("a",{href:"#",onClick:function onClick(event){return event.preventDefault()}},crumbTitle),delimiter&&index<trails.length-1&&el("span",{className:"wp-block-seo-ready-breadcrumbs__delimiter",style:{marginLeft:"var(--wp--style--block-gap, 0.5em)"}},delimiter)))})),el(InspectorControls,{},el(PanelBody,{initialOpen:true,title:__("Display Settings","seo-ready")},el(TextControl,{autoComplete:"off",autoCapitalize:"none",label:__("Delimiter","seo-ready"),onChange:function onChange(value){return setAttributes({delimiter:value})},placeholder:sprintf(__("e.g. %s","seo-ready"),"\u2192"),value:delimiter||""}),delimiter&&el(ToggleControl,{checked:Boolean(hideLeadingDelimiter),label:sprintf(__("%s leading delimiter?","seo-ready"),hideLeadingDelimiter?"Show":"Hide"),onChange:function onChange(){return setAttributes({hideLeadingDelimiter:!hideLeadingDelimiter})}}),el(ToggleControl,{checked:Boolean(hideCurrentPageTrail),label:sprintf(__("%s current page title?","seo-ready"),hideCurrentPageTrail?"Show":"Hide"),onChange:function onChange(){return setAttributes({hideCurrentPageTrail:!hideCurrentPageTrail})}}),el(ToggleControl,{checked:Boolean(hideSiteTitle),label:sprintf(__("%s site title?","seo-ready"),hideSiteTitle?"Show":"Hide"),onChange:function onChange(){return setAttributes({hideSiteTitle:!hideSiteTitle})}}),!hideSiteTitle&&el(TextControl,{autoComplete:"off",autoCapitalize:"none",label:__("Site Title Override","seo-ready"),onChange:function onChange(value){return setAttributes({siteTitleOverride:value})},placeholder:__("e.g. Home","seo-ready"),value:siteTitleOverride||""})),el(PanelBody,{initialOpen:false,title:sprintf(__("%s More","seo-ready"),"\u26A1")},el("p",{},el("p",{},el("strong",{},__("Liked the idea behind this plugin?","seo-ready"))),el(Fragment,{},__("Share your experience by leaving this plugin ","seo-ready")),el(ExternalLink,{href:"https://wordpress.org/support/plugin/seo-ready/reviews/?filter=5#new-post"},sprintf(__("5 stars %s if you like it.","seo-ready"),"\u2B50\u2B50\u2B50\u2B50\u2B50"))),el("p",{},__("You can also make a small ","seo-ready"),el(ExternalLink,{href:"https://www.buymeacoffee.com/mahdiyazdani"},__("donation","seo-ready")),__(" so I can continue maintaining and evolving my projects and new ones.","seo-ready")))))},save:function save(_ref2){var _style$color2;var attributes=_ref2.attributes;var backgroundColor=attributes.backgroundColor,style=attributes.style;var blockProps=useBlockProps.save({id:"breadcrumb",className:"is-layout-flex",style:{boxSizing:"border-box",listStyleType:"none",paddingLeft:0,margin:0,padding:backgroundColor||style!==null&&style!==void 0&&(_style$color2=style.color)!==null&&_style$color2!==void 0&&_style$color2.background?"1.25em 2.375em":null}});return el("ol",blockProps)}})})(window.wp,window.lodash);